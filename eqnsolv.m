function [tf, G, decoded, parity] = eqnsolv(G,message,method,row,decoded, parity)
%EQNSOLV Solves a system of linear equations using method
%   method is either linsolv or substitution cipher solve

k = length(message);
lastRow = G(row,:);
newParity = mod(dot(lastRow, message), 2);
parity = [parity; newParity];

if method == 1
    %CHECK IF WE CAN DECODE WITH LINEAR EQN SOLVER
    if row >= k && rank(G) == size(G,2)
        decoded = mod(G(1:row,:)\parity, 2);
        if (sum(decoded ~= message') ~= 0)
            error('decoded incorrectly')
        end
            
        tf = true;
    else
        tf = false;
    end
elseif method == 2
    %DECODE USING SUBSTITUTION CIPHER
    [ G, parity, decoded, tf ] = substitutionSolver( G, parity, message, decoded, row );
end
end
